const callbackForm=document.querySelector(".popup__form"),reviewForm=document.querySelector(".popup-review__form"),popupContainerThanks=document.querySelector(".popup-container-thanks"),body=document.body;let inputTel=document.querySelectorAll(".input-tel"),im=new Inputmask("+7 (999) 999-99-99");im.mask(inputTel);let validateForms=(e,t)=>{new JustValidate(e,{rules:t,messages:{name:{required:"Это поле обязательно для заполнения",minLength:"Поле должно содержать минимум 2 символа"},tel:{required:"Это поле обязательно для заполнения",minLength:"Поле должно содержать минимум 2 символа"},comment:{required:"Это поле обязательно для заполнения",minLength:"Поле должно содержать минимум 2 символа"}},submitHandler:function(t){let r=new FormData(t);const i=document.querySelector(""+e).getAttribute("action");console.log(i);let n=new XMLHttpRequest;n.onreadystatechange=()=>{4===n.readyState&&200===n.status&&(popupContainer.classList.remove("is-active"),setTimeout(()=>{body.classList.add("scroll-off"),popupContainerThanks.classList.add("is-active")},300))},n.open("POST",""+i,!0),n.send(r),t.reset()}})};validateForms(".popup__form",{name:{required:!0,minLength:2},tel:{required:!0,minLength:11}}),reviewForm&&validateForms(".popup-review__form",{name:{required:!0,minLength:2},comment:{required:!0,minLength:2}});const burger=document.querySelector(".burger"),menuWrapper=document.querySelector(".header__menu-wrapper"),menu=document.querySelector(".header__menu"),menuItem=document.querySelectorAll(".header__menu-item"),openMenuHandler=()=>{document.body.classList.toggle("scroll-off"),burger.classList.toggle("is-active"),menuWrapper.classList.contains("is-active")?setTimeout(()=>{menuWrapper.classList.toggle("is-active")},400):menuWrapper.classList.toggle("is-active"),menu.classList.contains("is-active")?menu.classList.toggle("is-active"):setTimeout(()=>{menu.classList.toggle("is-active")},400)};burger.addEventListener("click",()=>{openMenuHandler()}),menuItem.forEach(e=>{window.innerWidth<=1024&&e.addEventListener("click",()=>{openMenuHandler()})});const mainTitle=document.querySelector(".main-title--head"),appearanceTitle=()=>{window.innerWidth<576?mainTitle.classList.remove("visually-hidden"):mainTitle.classList.add("visually-hidden")};appearanceTitle(),window.addEventListener("resize",appearanceTitle);const popupOpenBtn=document.querySelectorAll(".popup-btn-js"),reviewOpenBtn=document.querySelector(".review-btn-js"),popupContainer=document.querySelector(".popup-container"),reviewContainer=document.querySelector(".popup-container-review"),closeBtn=document.querySelectorAll(".popup__close"),popupThanksBtn=document.querySelector(".popup-thanks__btn"),openPopup=e=>{document.body.classList.toggle("scroll-off"),e.classList.toggle("is-active")};popupOpenBtn.forEach(e=>{e.addEventListener("click",()=>{openPopup(popupContainer)})}),popupContainer.addEventListener("click",e=>{e.target.closest(".popup")||openPopup(popupContainer)}),reviewContainer&&reviewContainer.addEventListener("click",e=>{e.target.closest(".popup-review")||openPopup(reviewContainer)}),closeBtn.forEach(e=>{e.addEventListener("click",()=>{popupContainer.classList.contains("is-active")&&openPopup(popupContainer),reviewContainer&&reviewContainer.classList.contains("is-active")&&openPopup(reviewContainer)})}),reviewOpenBtn&&reviewOpenBtn.addEventListener("click",()=>{openPopup(reviewContainer)}),popupThanksBtn.addEventListener("click",()=>{popupContainerThanks.classList.remove("is-active"),body.classList.remove("scroll-off")});const heroSlider=document.querySelector(".hero__container"),servicesSlider=document.querySelector(".services__content"),portfolioSlider=document.querySelector(".portfolio__content"),reviewsSlider=document.querySelector(".reviews__content"),updateSlider=e=>{e.update()};if(heroSlider){new Swiper(heroSlider,{spaceBetween:30,loop:!0,slidesPerView:1,navigation:{prevEl:".swiper-button-prev--hero",nextEl:".swiper-button-next--hero"},scrollbar:{el:".swiper-scrollbar--hero"}})}let slider2;const slider3=new Swiper(portfolioSlider,{spaceBetween:30,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2,slidesPerColumn:2},1024:{slidesPerView:3,slidesPerColumn:2}},navigation:{prevEl:".swiper-button-prev--portfolio",nextEl:".swiper-button-next--portfolio"},scrollbar:{el:".swiper-scrollbar--portfolio"}}),slider4=new Swiper(reviewsSlider,{slidesPerView:"auto",spaceBetween:30,breakpoints:{320:{slidesPerView:1},768:{slidesPerView:2},1300:{slidesPerView:3}},navigation:{prevEl:".swiper-button-prev--reviews",nextEl:".swiper-button-next--reviews"},scrollbar:{el:".swiper-scrollbar--reviews"}}),sliderInit=()=>{window.innerWidth<=768&&"false"==servicesSlider.dataset.mobile&&(slider2=new Swiper(servicesSlider,{spaceBetween:30,loop:!0,slidesPerView:1,slideClass:"card",scrollbar:{el:".swiper-scrollbar--services"}}),servicesSlider.dataset.mobile="true"),servicesSlider&&window.innerWidth>768&&(servicesSlider.dataset.mobile="false",servicesSlider.classList.contains("swiper-container-initialized")&&slider2.destroy())};servicesSlider&&(sliderInit(),window.addEventListener("resize",()=>{sliderInit()}));